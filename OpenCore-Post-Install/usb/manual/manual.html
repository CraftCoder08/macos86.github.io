<!DOCTYPE html>
<html lang="it-IT">
  <head>
    <meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>USB Mapping | Guida Installazione Opencore</title><meta name="description" content=""><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.20">
    <link rel="modulepreload" href="/assets/app.9c75e1c0.js"><link rel="modulepreload" href="/assets/manual.html.80a88f9f.js"><link rel="modulepreload" href="/assets/manual.html.152dfff4.js">
    <link rel="stylesheet" href="/assets/style.eacd1a11.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/" class=""><img class="logo" src="/homepage.png" alt="Guida Installazione Opencore"><span class="site-name can-hide">Guida Installazione Opencore</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/Getting-Started-With-ACPI/" class="nav-link" aria-label="Iniziamo con ACPI"><!--[--><!--]--> Iniziamo con ACPI <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/config.plist/" class="nav-link" aria-label="Configurazione di OpenCore"><!--[--><!--]--> Configurazione di OpenCore <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/troubleshooting/" class="nav-link" aria-label="Risoluzione dei problemi"><!--[--><!--]--> Risoluzione dei problemi <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/OpenCore-Post-Install/" class="nav-link router-link-active" aria-label="Dopo l&#39;installazione di OpenCore..."><!--[--><!--]--> Dopo l&#39;installazione di OpenCore... <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/OpenCore-Multiboot/" class="nav-link" aria-label="Multibooting con OpenCore"><!--[--><!--]--> Multibooting con OpenCore <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/OpenCanopy-Gallery/" class="nav-link" aria-label="Galleria OpenCanopy"><!--[--><!--]--> Galleria OpenCanopy <!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/" rel="noopener noreferrer" target="_blank" aria-label="Dortania (EN)"><!--[--><!--]--> Dortania (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/GPU-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="GPU Buyers Guide (EN)"><!--[--><!--]--> GPU Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/Wireless-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="Wireless Buyers Guide (EN)"><!--[--><!--]--> Wireless Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/Anti-Hackintosh-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="Anti Buyers Guide (EN)"><!--[--><!--]--> Anti Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/macos86/macos86.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/Getting-Started-With-ACPI/" class="nav-link" aria-label="Iniziamo con ACPI"><!--[--><!--]--> Iniziamo con ACPI <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/config.plist/" class="nav-link" aria-label="Configurazione di OpenCore"><!--[--><!--]--> Configurazione di OpenCore <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/troubleshooting/" class="nav-link" aria-label="Risoluzione dei problemi"><!--[--><!--]--> Risoluzione dei problemi <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/OpenCore-Post-Install/" class="nav-link router-link-active" aria-label="Dopo l&#39;installazione di OpenCore..."><!--[--><!--]--> Dopo l&#39;installazione di OpenCore... <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/OpenCore-Multiboot/" class="nav-link" aria-label="Multibooting con OpenCore"><!--[--><!--]--> Multibooting con OpenCore <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/OpenCanopy-Gallery/" class="nav-link" aria-label="Galleria OpenCanopy"><!--[--><!--]--> Galleria OpenCanopy <!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/" rel="noopener noreferrer" target="_blank" aria-label="Dortania (EN)"><!--[--><!--]--> Dortania (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/GPU-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="GPU Buyers Guide (EN)"><!--[--><!--]--> GPU Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/Wireless-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="Wireless Buyers Guide (EN)"><!--[--><!--]--> Wireless Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/Anti-Hackintosh-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="Anti Buyers Guide (EN)"><!--[--><!--]--> Anti Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/macos86/macos86.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a href="/OpenCore-Post-Install/" class="nav-link router-link-active sidebar-heading sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----><!--]--><!--[--><p class="sidebar-heading sidebar-item">Universal</p><ul class=""><li><!--[--><a href="/OpenCore-Post-Install/universal/audio.html" class="nav-link sidebar-item" aria-label="Fixing audio with AppleALC"><!--[--><!--]--> Fixing audio with AppleALC <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/oc2hdd.html" class="nav-link sidebar-item" aria-label="Moving OpenCore from USB to macOS Drive"><!--[--><!--]--> Moving OpenCore from USB to macOS Drive <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/update.html" class="nav-link sidebar-item" aria-label="Updating OpenCore and macOS"><!--[--><!--]--> Updating OpenCore and macOS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/drm.html" class="nav-link sidebar-item" aria-label="Fixing DRM support and iGPU performance"><!--[--><!--]--> Fixing DRM support and iGPU performance <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/iservices.html" class="nav-link sidebar-item" aria-label="Fixing iMessage and other services with OpenCore"><!--[--><!--]--> Fixing iMessage and other services with OpenCore <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/pm.html" class="nav-link sidebar-item" aria-label="Optimizing Power Management"><!--[--><!--]--> Optimizing Power Management <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/sleep.html" class="nav-link sidebar-item" aria-label="Fixing Sleep"><!--[--><!--]--> Fixing Sleep <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">USB Fixes</p><ul class=""><li><!--[--><a href="/OpenCore-Post-Install/usb/" class="nav-link router-link-active sidebar-item" aria-label="Why should you USB map"><!--[--><!--]--> Why should you USB map <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/usb/system-preparation.html" class="nav-link sidebar-item" aria-label="System Preparation"><!--[--><!--]--> System Preparation <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><p class="sidebar-item active">USB Mapping</p><ul class="sidebar-sub-items"><li><!--[--><a href="/OpenCore-Post-Install/usb/intel-mapping/intel.html" class="nav-link sidebar-item" aria-label="USB Mapping"><!--[--><!--]--> USB Mapping <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="USB Mapping"><!--[--><!--]--> USB Mapping <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#usb-mapping-the-manual-way" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="USB Mapping: The manual way"><!--[--><!--]--> USB Mapping: The manual way <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#finding-your-usb-ports" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Finding your USB ports"><!--[--><!--]--> Finding your USB ports <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#finding-which-ports-match-with-which-controller" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Finding which ports match with which controller"><!--[--><!--]--> Finding which ports match with which controller <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#usb-a-mapping" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="USB-A mapping"><!--[--><!--]--> USB-A mapping <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#creating-a-personal-map" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Creating a personal map"><!--[--><!--]--> Creating a personal map <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#usb-c-mapping" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="USB-C mapping"><!--[--><!--]--> USB-C mapping <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#continuing-mapping" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Continuing mapping"><!--[--><!--]--> Continuing mapping <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#special-notes" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Special Notes"><!--[--><!--]--> Special Notes <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#creating-our-kext" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Creating our kext"><!--[--><!--]--> Creating our kext <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#determining-the-properties" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Determining the properties"><!--[--><!--]--> Determining the properties <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#ioprovidermergeproperties" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="IOProviderMergeProperties"><!--[--><!--]--> IOProviderMergeProperties <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#continuing-on" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Continuing on"><!--[--><!--]--> Continuing on <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/OpenCore-Post-Install/usb/manual/manual.html#cleaning-up" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Cleaning up"><!--[--><!--]--> Cleaning up <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/usb/misc/" class="nav-link sidebar-item" aria-label="Miscellaneous Fixes"><!--[--><!--]--> Miscellaneous Fixes <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a href="/OpenCore-Post-Install/usb/misc/power.html" class="nav-link sidebar-item" aria-label="Fixing USB Power"><!--[--><!--]--> Fixing USB Power <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/usb/misc/shutdown.html" class="nav-link sidebar-item" aria-label="Fixing Shutdown/Restart"><!--[--><!--]--> Fixing Shutdown/Restart <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/usb/misc/instant-wake.html" class="nav-link sidebar-item" aria-label="GPRW/UPRW/LANC Instant Wake Patch"><!--[--><!--]--> GPRW/UPRW/LANC Instant Wake Patch <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/usb/misc/keyboard.html" class="nav-link sidebar-item" aria-label="Keyboard Wake Issues"><!--[--><!--]--> Keyboard Wake Issues <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Security</p><ul class=""><li><!--[--><a href="/OpenCore-Post-Install/universal/security.md" class="nav-link sidebar-item" aria-label="Security and FileVault"><!--[--><!--]--> Security and FileVault <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a href="/OpenCore-Post-Install/universal/security/filevault.html" class="nav-link sidebar-item" aria-label="FileVault"><!--[--><!--]--> FileVault <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/security/vault.html" class="nav-link sidebar-item" aria-label="Vault"><!--[--><!--]--> Vault <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/security/scanpolicy.html" class="nav-link sidebar-item" aria-label="ScanPolicy"><!--[--><!--]--> ScanPolicy <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/security/password.html" class="nav-link sidebar-item" aria-label="OpenCore Menu Password"><!--[--><!--]--> OpenCore Menu Password <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/security/applesecureboot.html" class="nav-link sidebar-item" aria-label="Apple Secure Boot"><!--[--><!--]--> Apple Secure Boot <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--[--><a href="/OpenCore-Post-Install/laptop-specific/battery" class="nav-link sidebar-heading sidebar-item" aria-label="Laptop Specifics - Fixing Battery Read-outs"><!--[--><!--]--> Laptop Specifics - Fixing Battery Read-outs <!--[--><!--]--></a><!----><!--]--><!--[--><p class="sidebar-heading sidebar-item">Cosmetics</p><ul class=""><li><!--[--><a href="/OpenCore-Post-Install/cosmetic/verbose.html" class="nav-link sidebar-item" aria-label="Fixing Resolution and Verbose"><!--[--><!--]--> Fixing Resolution and Verbose <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/cosmetic/gui.html" class="nav-link sidebar-item" aria-label="OpenCore beauty treatment"><!--[--><!--]--> OpenCore beauty treatment <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/universal/memory.html" class="nav-link sidebar-item" aria-label="Fixing MacPro7,1 Memory Errors"><!--[--><!--]--> Fixing MacPro7,1 Memory Errors <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Multiboot</p><ul class=""><li><!--[--><a href="/OpenCore-Multiboot/" class="nav-link sidebar-item" aria-label="Multiboot con OpenCore"><!--[--><!--]--> Multiboot con OpenCore <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/multiboot/bootstrap.html" class="nav-link sidebar-item" aria-label="Using LauncherOption"><!--[--><!--]--> Using LauncherOption <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/multiboot/bootcamp.html" class="nav-link sidebar-item" aria-label="Installing and using BootCamp utilities"><!--[--><!--]--> Installing and using BootCamp utilities <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Miscellaneous</p><ul class=""><li><!--[--><a href="/OpenCore-Post-Install/misc/rtc.html" class="nav-link sidebar-item" aria-label="Fixing RTC write issues"><!--[--><!--]--> Fixing RTC write issues <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/misc/msr-lock.html" class="nav-link sidebar-item" aria-label="Fixing CFG Lock"><!--[--><!--]--> Fixing CFG Lock <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/misc/nvram.html" class="nav-link sidebar-item" aria-label="Emulated NVRAM"><!--[--><!--]--> Emulated NVRAM <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/OpenCore-Post-Install/gpu-patching/" class="nav-link sidebar-heading sidebar-item" aria-label="In-depth GPU patching"><!--[--><!--]--> In-depth GPU patching <!--[--><!--]--></a><ul class=""><li><!--[--><p class="sidebar-item">Modern Intel iGPU</p><ul class="sidebar-sub-items"><li><!--[--><a href="/OpenCore-Post-Install/gpu-patching/intel-patching/" class="nav-link sidebar-item" aria-label="Intel iGPU Patching"><!--[--><!--]--> Intel iGPU Patching <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/gpu-patching/intel-patching/vram.html" class="nav-link sidebar-item" aria-label="Patching VRAM"><!--[--><!--]--> Patching VRAM <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/gpu-patching/intel-patching/connector.html" class="nav-link sidebar-item" aria-label="Patching Connector Types"><!--[--><!--]--> Patching Connector Types <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/gpu-patching/intel-patching/busid.html" class="nav-link sidebar-item" aria-label="Patching Bus IDs"><!--[--><!--]--> Patching Bus IDs <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/gpu-patching/legacy-intel/" class="nav-link sidebar-item" aria-label="Legacy Intel iGPU"><!--[--><!--]--> Legacy Intel iGPU <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/OpenCore-Post-Install/gpu-patching/nvidia-patching/" class="nav-link sidebar-item"><!--[--><!--]-->  <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="usb-mapping" tabindex="-1"><a class="header-anchor" href="#usb-mapping" aria-hidden="true">#</a> USB Mapping</h1><p>So with the prerequisites out of the way, we can finally get to the meat of this guide. And now we get to finally read one of my favorite books before I go to bed each night: <a href="https://uefi.org/sites/default/files/resources/ACPI_6_3_final_Jan30.pdf" target="_blank" rel="noopener noreferrer">The Advanced Configuration and Power Interface (ACPI) Specification!<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p>Now if you haven&#39;t read through this before(which I highly recommend you do, it&#39;s a thrilling tale), I&#39;ll point you to the meat of the USB situation:</p><ul><li>Section 9.14: _UPC (USB Port Capabilities)</li></ul><p>Here we&#39;re greeted with all the possible USB ports in ACPI:</p><table><thead><tr><th style="text-align:left;">Type</th><th style="text-align:left;">Info</th><th style="text-align:left;">Comments</th></tr></thead><tbody><tr><td style="text-align:left;">0</td><td style="text-align:left;">USB 2.0 Type-A connector</td><td style="text-align:left;">This is what macOS will default all ports to when no map is present</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;">USB 3.0 Type-A connector</td><td style="text-align:left;">3.0, 3.1 and 3.2 ports share the same Type</td></tr><tr><td style="text-align:left;">8</td><td style="text-align:left;">Type C connector - USB 2.0-only</td><td style="text-align:left;">Mainly seen in phones</td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;">Type C connector - USB 2.0 and USB 3.0 with Switch</td><td style="text-align:left;">Flipping the device <strong>does not</strong> change the ACPI port</td></tr><tr><td style="text-align:left;">10</td><td style="text-align:left;">Type C connector - USB 2.0 and USB 3.0 without Switch</td><td style="text-align:left;">Flipping the device <strong>does</strong> change the ACPI port. generally seen on 3.1/2 motherboard headers</td></tr><tr><td style="text-align:left;">255</td><td style="text-align:left;">Proprietary connector</td><td style="text-align:left;">For Internal USB ports like Bluetooth</td></tr></tbody></table><h2 id="usb-mapping-the-manual-way" tabindex="-1"><a class="header-anchor" href="#usb-mapping-the-manual-way" aria-hidden="true">#</a> USB Mapping: The manual way</h2><p>This section is for those who want to get down into the meats of their hackintosh, to really understand what it&#39;s doing and help if there&#39;s any issues with USBmap.py and other mapping tools. To start, we&#39;ll need a few things:</p><ul><li>Installed version of macOS <ul><li>This is due to how macOS enumerates ports, trying to map from other OSes makes this difficult</li><li>Note: This guide will be focusing on OS X 10.11, El Capitan and newer. Older OSes shouldn&#39;t require any USB mapping</li></ul></li><li>Non-conflicting USB names <ul><li>See previous section: <a href="/OpenCore-Post-Install/usb/system-preparation.html#checking-what-renames-you-need" class="">Checking what renames you need</a></li></ul></li><li>A USB 2.0 and USB 3.0 device to test with <ul><li>You must have 2 separate devices as to ensure no mix ups with personalities</li></ul></li><li><a href="https://github.com/khronokernel/IORegistryClone/blob/master/ioreg-302.zip" target="_blank" rel="noopener noreferrer">IORegistryExplorer.app<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a><ul><li>To view the inner workings of macOS more easily</li><li>If you plan to use Discord for troubleshooting, <a href="https://github.com/khronokernel/IORegistryClone/blob/master/ioreg-210.zip" target="_blank" rel="noopener noreferrer">v2.1.0<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> is a bit easier on file size.</li></ul></li><li><a href="https://bitbucket.org/RehabMan/os-x-usb-inject-all/downloads/" target="_blank" rel="noopener noreferrer">USBInjectAll<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a><ul><li>This is only required for older USB controllers like Broadwell and older, however some Coffee Lake systems may still require it</li><li><strong>Reminder</strong> this kext does not work on AMD</li></ul></li><li><a href="https://github.com/dortania/OpenCore-Post-Install/blob/master/extra-files/Sample-USB-Map.kext.zip" target="_blank" rel="noopener noreferrer">Sample-USB-Map.kext<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://github.com/corpnewt/ProperTree" target="_blank" rel="noopener noreferrer">ProperTree<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a><ul><li>Or any other plist editor</li></ul></li></ul><p>Now with all this out of the way, lets get to USB mapping!</p><h2 id="finding-your-usb-ports" tabindex="-1"><a class="header-anchor" href="#finding-your-usb-ports" aria-hidden="true">#</a> Finding your USB ports</h2><p>Lets open our previously downloaded <a href="https://github.com/khronokernel/IORegistryClone/blob/master/ioreg-302.zip" target="_blank" rel="noopener noreferrer">IORegistryExplorer.app<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> and search for our USB controller(s).</p><p>The 2 main search terms are <code>XHC</code> and <code>EHC</code>, but if you have a legacy board with UHCI or OHCI controllers you&#39;ll need to adjust. A blanket <code>USB</code> search may show too many entries and confuse you.</p><p>For this example, lets try and map an Asus X299-E Strix board:</p><p><img src="/assets/initial-boot.8e551eac.png" alt=""></p><p>From the above image we can see 3 USB controllers:</p><ul><li>PXSX(1, Top)</li><li>PXSX(2, Middle)</li><li>XHCI(3, Bottom)</li></ul><p>Pay attention that they&#39;re individual controllers, as this means <strong>each USB controller has it&#39;s own port limit</strong>. So you&#39;re not as starved for USB ports as you may think.</p><p>Now I personally know which USB controllers match up with which physical ports, problem is it&#39;s not always as obvious which ports match with which controllers. So lets try to figure out which is what.</p><p><strong>Note</strong>: The AppleUSBLegacyRoot entry is an entry that lists all active USB controllers and ports, these are not USB controllers themselves so you can outright ignore them.</p><p><strong>Note 2</strong>: Keep in mind every motherboard model will have a unique set of port combos, controller types and names. So while our example uses PXSX, yours might have the XHC0 or PTCP name. And quite common on older motherboards is that you may only have 1 controller, this is alright so don&#39;t stress about having the exact same setup as the example.</p><p>Common names you can check:</p><ul><li>USB 3.x controllers: <ul><li>XHC</li><li>XHC0</li><li>XHC1</li><li>XHC2</li><li>XHCI</li><li>XHCX</li><li>AS43</li><li>PTXH <ul><li>Commonly associated with AMD Chipset controllers</li></ul></li><li>PTCP <ul><li>Found on AsRock X399</li></ul></li><li>PXSX <ul><li>This is a generic PCIe device, <strong>double check it&#39;s a USB device</strong> as NVMe controllers and other devices can use the same name.</li></ul></li></ul></li><li>USB 2.x controllers: <ul><li>EHCI</li><li>EHC1</li><li>EHC2</li><li>EUSB</li><li>USBE</li></ul></li></ul><h3 id="finding-which-ports-match-with-which-controller" tabindex="-1"><a class="header-anchor" href="#finding-which-ports-match-with-which-controller" aria-hidden="true">#</a> Finding which ports match with which controller</h3><p>To start, I&#39;m going to plug a USB device into my front USB 3.1(Type-A) and 3.2(Type-C):</p><p><img src="/assets/front-io-plugged.ce790292.png" alt=""></p><p>Next lets look at IOReg, and we can see where our USB devices fell:</p><table><thead><tr><th style="text-align:left;">USB-C</th><th style="text-align:left;">USB-A</th></tr></thead><tbody><tr><td style="text-align:left;"><img src="/assets/usb-c-test.15120ded.png" alt=""></td><td style="text-align:left;"><img src="/assets/usb-a-test-3.50b1fac9.png" alt=""></td></tr></tbody></table><p>Here we see a few things:</p><ul><li>Front 3.2 Type-C is on the PXSX(2, middle) Controller</li><li>Front 3.1 Type-A is on the XHCI(3, Bottom) Controller</li></ul><p>Now that we have an idea of which ports go to which controller, can can now look into how we USB map.</p><h3 id="usb-a-mapping" tabindex="-1"><a class="header-anchor" href="#usb-a-mapping" aria-hidden="true">#</a> USB-A mapping</h3><p>As mentioned before, USB 3.x ports are split into 2 personalities: USB 2.0 and USB 3.0. This is to ensure backwards compatibility but macOS itself has difficulties determining which personalities match up to which ports. That&#39;s where we come in to help.</p><p>So lets take our USB-A port, when we plug in a USB 3.0 device into it we see <code>XHCI -&gt; SS03</code> light up. This is the USB 3.0 personality of the port. Now we&#39;ll want to plug a USB 2.0 device into that port:</p><table><thead><tr><th style="text-align:left;">3.0 Personality</th><th style="text-align:left;">2.0 Personality</th></tr></thead><tbody><tr><td style="text-align:left;"><img src="/assets/usb-a-test-4.822fd788.png" alt=""></td><td style="text-align:left;"><img src="/assets/usb-a-test-2.92b043ee.png" alt=""></td></tr></tbody></table><p>We see that the USB 2.0 personality of our 3.0 port is <code>XHCI -&gt; HS03</code>, now you should be able to get an idea of what we&#39;re trying to do:</p><ul><li>Front Type-A: <ul><li>HS03: 2.0 Personality</li><li>SS03: 3.0 Personality</li></ul></li></ul><p><strong>Note</strong>: If your USB ports show up as either AppleUSB20XHCIPort or AppleUSB30XHCIPort, you can still map however it will be a bit more difficult. Instead of writing down the names, pay very close attention to the <code>port</code> property on the right hand side:</p><p><img src="/assets/location-id.dffe7896.png" alt=""></p><h3 id="creating-a-personal-map" tabindex="-1"><a class="header-anchor" href="#creating-a-personal-map" aria-hidden="true">#</a> Creating a personal map</h3><p>This is where we pull out pen and paper, and start to write down which ports physically match up with which digital ports. An example of what your map can look like:</p><table><thead><tr><th style="text-align:left;">Name Mapping</th><th style="text-align:left;">Property Mapping</th></tr></thead><tbody><tr><td style="text-align:left;"><img src="/assets/front-io-diagram.cc166573.png" alt=""></td><td style="text-align:left;"><img src="/assets/full-diagram-port.1285d557.png" alt=""></td></tr></tbody></table><p>Your own map doesn&#39;t need to look exactly like this, however you&#39;ll want something that you can easily understand and refer to down the line.</p><p>Note:</p><ul><li>Name Mapping: When a proper name shows up in IOReg(ie. HS01)</li><li>Property Mapping: When no proper name is given(ie. AppleUSB30XHCIPort)</li></ul><h3 id="usb-c-mapping" tabindex="-1"><a class="header-anchor" href="#usb-c-mapping" aria-hidden="true">#</a> USB-C mapping</h3><p>Next lets map our USB-C port, this is where it gets quite tricky as you may have noticed earlier:</p><table><thead><tr><th style="text-align:left;">Type</th><th style="text-align:left;">Info</th><th style="text-align:left;">Comments</th></tr></thead><tbody><tr><td style="text-align:left;">8</td><td style="text-align:left;">Type C connector - USB 2.0-only</td><td style="text-align:left;">Mainly seen in phones</td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;">Type C connector - USB 2.0 and USB 3.0 with Switch</td><td style="text-align:left;">Flipping the device <strong>does not</strong> change the ACPI port</td></tr><tr><td style="text-align:left;">10</td><td style="text-align:left;">Type C connector - USB 2.0 and USB 3.0 without Switch</td><td style="text-align:left;">Flipping the device <strong>does</strong> change the ACPI port. generally seen on 3.1/2 motherboard headers</td></tr></tbody></table><p>So when we map our USB-C header, we notice it occupies the SS01 port. But when we flip it, we actually populate it on the SS02 port. When this happens, you&#39;ll want to write this down for when we apply the port type.</p><ul><li>Note: All personalities from this port will be put under the Type 10</li><li>Note 2: Not all USB-C headers will be Type 10, <strong>double check yours</strong></li></ul><p><img src="/assets/usb-c-test-2.e0c2ed7f.png" alt=""></p><h3 id="continuing-mapping" tabindex="-1"><a class="header-anchor" href="#continuing-mapping" aria-hidden="true">#</a> Continuing mapping</h3><p>Now that you have the basic idea, you&#39;ll want to go around with every USB port and map it out. This will take time, and don&#39;t forget to write it down. Your final diagram should look similar to this:</p><p><img src="/assets/full-diagram.c262c0f2.png" alt=""></p><h3 id="special-notes" tabindex="-1"><a class="header-anchor" href="#special-notes" aria-hidden="true">#</a> Special Notes</h3><ul><li><a href="#bluetooth">Bluetooth</a></li><li><a href="#usrx-ports">USRx Ports</a></li><li><a href="#missing-usb-ports">Missing USB Ports</a></li></ul><h4 id="bluetooth" tabindex="-1"><a class="header-anchor" href="#bluetooth" aria-hidden="true">#</a> Bluetooth</h4><p>So while not obvious to many, Bluetooth actually runs over the USB interface internally. This means that when mapping, you&#39;ll need to pay close attention to devices that already show up in IOReg:</p><p><img src="/assets/bluetooth.e0a33aca.png" alt=""></p><p>Keep this in mind, as this plays into the Type 255 and getting certain services like handoff working correctly.</p><h4 id="usrx-ports" tabindex="-1"><a class="header-anchor" href="#usrx-ports" aria-hidden="true">#</a> USRx Ports</h4><p>When mapping, you may notice some extra ports left over, specifically USR1 and USR2. These ports are known as &quot;USBR&quot; ports, or more specifically <a href="https://software.Intel.com/content/www/us/en/develop/documentation/amt-developer-guide/top/storage-redirection.html" target="_blank" rel="noopener noreferrer">USB Redirection Ports<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>. Use of these is for remote management but real Macs don&#39;t ship with USBR devices and so has no support for them OS-wise. You can actually ignore these entries in your USB map:</p><p><img src="/assets/usr.5aafe7ac.png" alt=""></p><h4 id="missing-usb-ports" tabindex="-1"><a class="header-anchor" href="#missing-usb-ports" aria-hidden="true">#</a> Missing USB ports</h4><p>In some rare situations, certain USB ports may not show up in macOS at all. This is likely due to a missing definition in your ACPI tables, and so we have a few options:</p><ul><li>Coffee Lake and older should use <a href="https://github.com/Sniki/OS-X-USB-Inject-All/releases" target="_blank" rel="noopener noreferrer">USBInjectAll<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a><ul><li>Don&#39;t forget to add this to both EFI/OC/Kexts and you config.plist&#39;s kernel -&gt; Add</li></ul></li><li>Comet Lake and newer should use SSDT-RHUB</li><li>AMD systems should also use SSDT-RHUB</li></ul><p>SSDT-RHUB&#39;s purpose is to reset your USB controller, and force macOS to reenumerate them. This avoids the hassle of trying to patch your existing ACPI tables.</p><p>To create your own SSDT-RHUB-MAP:</p><ul><li>Grab a copy of the SSDT: <a href="https://github.com/dortania/Getting-Started-With-ACPI/blob/master/extra-files/decompiled/SSDT-RHUB.dsl" target="_blank" rel="noopener noreferrer">SSDT-RHUB.dsl<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li>Grab <a href="https://github.com/acidanthera/MaciASL/releases/tag/1.5.7" target="_blank" rel="noopener noreferrer">maciASL<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><p>Next, open our newly downloaded SSDT with maciASL, you should be presented with the following:</p><p><img src="/assets/ssdt-rhub-normal.004a0ef2.png" alt=""></p><p>Now, open IOReg and find the USB controller you want to reset(pay very close attention its the USB controller and not the child RHUB with the same name):</p><p>If you look to the right side, you should see the <code>acpi-apth</code> property. Here we&#39;re going to need to translate it to something our SSDT can use:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># before modifying</span>
IOService:/AppleACPIPlatformExpert/PC00@0/AppleACPIPCI/RP05@1C,4/IOPP/PXSX@0
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Now we&#39;ll want to strip out any unnecessary data:</p><ul><li><code>IOService:/AppleACPIPlatformExpert/</code></li><li><code>@##</code></li><li><code>IOPP</code></li></ul><p>Once cleaned up, yours should look similar:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># After modifying</span>
PC00.RP05.PXSX
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Following the example from above, we&#39;ll be renaming <code>PCI0.XHC1.RHUB</code> to <code>PC00.RP05.PXSX.RHUB</code>:</p><p><strong>Before</strong>:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>External (_SB_.PCI0.XHC1.RHUB, DeviceObj) &lt;- Rename this

Scope (_SB.PCI0.XHC1.RHUB) &lt;- Rename this
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/assets/ssdt-rhub.9186cc0e.png" alt=""></p><p>Following the example pathing we found, the SSDT should look something like this:</p><p><strong>After</strong>:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>External (_SB.PC00.RP05.PXSX.RHUB, DeviceObj) &lt;- Renamed

Scope (_SB.PC00.RP05.PXSX.RHUB) &lt;- Renamed
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/assets/ssdt-rhub-fixed.7f0ef464.png" alt=""></p><p>Once you&#39;ve edited the SSDT to your USB controller&#39;s path, you can export it with <code>File -&gt; SaveAs -&gt; ACPI Machine Language Binary</code>:</p><p><img src="/assets/ssdt-save.3ab3b707.png" alt=""></p><p>Finally, remember to add this SSDT to both EFI/OC/ACPI and your config.plist under ACPI -&gt; Add.</p><h2 id="creating-our-kext" tabindex="-1"><a class="header-anchor" href="#creating-our-kext" aria-hidden="true">#</a> Creating our kext</h2><p>Its the time you&#39;ve all been waiting for, we finally get to create our USB map!</p><p>First off, we&#39;ll want to grab a sample USB map kext:</p><ul><li><a href="https://github.com/dortania/OpenCore-Post-Install/blob/master/extra-files/Sample-USB-Map.kext.zip" target="_blank" rel="noopener noreferrer">Sample-USB-Map.kext<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><p>Next right click the .kext, and select <code>Show Package Contents</code>. then drill down to the info.plist:</p><table><thead><tr><th style="text-align:left;">Show Contents</th><th style="text-align:left;">info.plist</th></tr></thead><tbody><tr><td style="text-align:left;"><img src="/assets/show-contents.c19fccbc.png" alt=""></td><td style="text-align:left;"><img src="/assets/info-plist.b83b2b09.png" alt=""></td></tr></tbody></table><p>Now lets open ProperTree and look at this info.plist:</p><p><img src="/assets/info-plist-open.5dd79cd1.png" alt=""></p><p>Here we see a few sections, under <code>IOKitPersonalities</code>:</p><ul><li>RP05 - PXSX(1)</li><li>RP07 - PXSX(2)</li><li>XHCI - XHCI</li></ul><p>Each entry here represents a USB controller, specifically the map for each controller. The names of the entry don&#39;t matter much however, it&#39;s more for book keeping so you know which entry to has which USB map.</p><p>Next lets head into the <code>RP05 - PXSX(1)</code> entry:</p><p><img src="/assets/rp05-entry.e46e0dee.png" alt=""></p><p>Here we see a few more important properties:</p><table><thead><tr><th style="text-align:left;">Property</th><th style="text-align:left;">Comment</th></tr></thead><tbody><tr><td style="text-align:left;">IOPathMatch</td><td style="text-align:left;">The device macOS will choose to attach the map to</td></tr><tr><td style="text-align:left;">IOProviderClass</td><td style="text-align:left;">The USB driver macOS will choose to attach</td></tr><tr><td style="text-align:left;">model</td><td style="text-align:left;">The SMBIOS the USB map attaches too</td></tr><tr><td style="text-align:left;">IOProviderMergeProperties</td><td style="text-align:left;">The dictionary holding the actual port map</td></tr></tbody></table><h3 id="determining-the-properties" tabindex="-1"><a class="header-anchor" href="#determining-the-properties" aria-hidden="true">#</a> Determining the properties</h3><p>Determining the value for each property is actually quite straight forward:</p><ul><li><a href="#iopathmatch">IOPathMatch</a></li><li><a href="#ioproviderclass">IOProviderClass</a></li><li><a href="#model">model</a></li><li><a href="#ioprovidermergeproperties">IOProviderMergeProperties</a></li></ul><h4 id="iopathmatch" tabindex="-1"><a class="header-anchor" href="#iopathmatch" aria-hidden="true">#</a> IOPathMatch</h4><p>Finding IOPathMatch is super easy, first find the USB controller you want to map and then select the Root HUB(so the PXSX child with the same name as the parent, don&#39;t worry it&#39;s less confusing when you look at the image):</p><p><img src="/assets/iopath-match.3e33bcb7.png" alt=""></p><p>Now with the PXSX entry selected, simply copy(Cmd+C) and paste it into our info.plist. Your property should look similar to the below:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>IOService:/AppleACPIPlatformExpert/PC00@0/AppleACPIPCI/RP05@1C,4/IOPP/PXSX@0/PXSX@01000000
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>Note</strong>: Each USB Controller will have a unique IOPathMatch value, keep this in mind if you have multiple controllers of the same name. This Asus X299 board has 2 PXSX USB controllers, so each new USB map dictionary will have a unique entry for IOPathMatch.</p><h4 id="ioproviderclass" tabindex="-1"><a class="header-anchor" href="#ioproviderclass" aria-hidden="true">#</a> IOProviderClass</h4><p>Finding IOProviderClass is also easy, select the Root-hub once again and look for the CFBundleIdentifier value:</p><table><thead><tr><th style="text-align:left;">IOReg</th><th style="text-align:left;">info.plist</th></tr></thead><tbody><tr><td style="text-align:left;"><img src="/assets/ioproviderclass.c02c08f5.png" alt=""></td><td style="text-align:left;"><img src="/assets/iorpoviderclass-plist.5b7b5c41.png" alt=""></td></tr></tbody></table><p>Now we can&#39;t take that value 1-1, instead we need to trim it to the Kext&#39;s short name being <code>AppleUSBXHCIPCI</code>(So we removed <code>com.apple.driver.usb.</code>)</p><h4 id="model" tabindex="-1"><a class="header-anchor" href="#model" aria-hidden="true">#</a> model</h4><p>If you&#39;ve forgotten what SMBIOS you&#39;re using, you can simply check the top level device in IOReg:</p><table><thead><tr><th style="text-align:left;">IOReg</th><th style="text-align:left;">info.plist</th></tr></thead><tbody><tr><td style="text-align:left;"><img src="/assets/smbios.e65d9ebc.png" alt=""></td><td style="text-align:left;"><img src="/assets/smbios-plist.a9775a87.png" alt=""></td></tr></tbody></table><h3 id="ioprovidermergeproperties" tabindex="-1"><a class="header-anchor" href="#ioprovidermergeproperties" aria-hidden="true">#</a> IOProviderMergeProperties</h3><p>Now lets open the IOProviderMergeProperties dictionary:</p><p><img src="/assets/ioprovidermerge.3094a47d.png" alt=""></p><p>Here we have a lot of data to work through:</p><table><thead><tr><th style="text-align:left;">Property</th><th style="text-align:left;">Comment</th></tr></thead><tbody><tr><td style="text-align:left;">name</td><td style="text-align:left;">The name of the USB port&#39;s dictionary</td></tr><tr><td style="text-align:left;">port-count</td><td style="text-align:left;">This is the largest port value you&#39;re injecting</td></tr><tr><td style="text-align:left;">UsbConnector</td><td style="text-align:left;">This is the type of USB port as mentioned in the ACPI 9.14 section</td></tr><tr><td style="text-align:left;">port</td><td style="text-align:left;">The physical location of your USB port in ACPI</td></tr><tr><td style="text-align:left;">Comment</td><td style="text-align:left;">An optional entry to help you keep track of all your ports</td></tr></tbody></table><p>And a reminder of all possible port types:</p><table><thead><tr><th style="text-align:left;">Type</th><th style="text-align:left;">Info</th><th style="text-align:left;">Comments</th></tr></thead><tbody><tr><td style="text-align:left;">0</td><td style="text-align:left;">USB 2.0 Type-A connector</td><td style="text-align:left;">This is what macOS will default all ports to when no map is present</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;">USB 3.0 Type-A connector</td><td style="text-align:left;">3.0, 3.1 and 3.2 ports share the same Type</td></tr><tr><td style="text-align:left;">8</td><td style="text-align:left;">Type C connector - USB 2.0-only</td><td style="text-align:left;">Mainly seen in phones</td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;">Type C connector - USB 2.0 and USB 3.0 with Switch</td><td style="text-align:left;">Flipping the device <strong>does not</strong> change the ACPI port</td></tr><tr><td style="text-align:left;">10</td><td style="text-align:left;">Type C connector - USB 2.0 and USB 3.0 without Switch</td><td style="text-align:left;">Flipping the device <strong>does</strong> change the ACPI port. generally seen on 3.1/2 motherboard headers</td></tr><tr><td style="text-align:left;">255</td><td style="text-align:left;">Proprietary connector</td><td style="text-align:left;">For Internal USB ports like Bluetooth</td></tr></tbody></table><p>It should be coming full circle now, as you can see how our previous work with mapping out our ports works.</p><h4 id="name" tabindex="-1"><a class="header-anchor" href="#name" aria-hidden="true">#</a> Name</h4><p>The name property is actually the name of the USB port&#39;s dictionary, and is used solely for house keeping. Keep in mind every USB port you want to use needs to have its own unique USB port dictionary.</p><p>The name itself holds no value besides showing up in IOReg and so this can be whatever you like. To keep this sane, we use the name already given by our ACPI tables(in this case HS01) but the name can be any 4 character entry. However do not go over this 4 char limit, as unintended side effects can happen.</p><ul><li>Note: Those with AppleUSB20XHCIPort or AppleUSB30XHCIPort names for USB ports, you should choose a name easy to identify. On Intel, this is HSxx for 2.0 personalities and SSxx for 3.0 personalities</li></ul><p><img src="/assets/name.52277fd9.png" alt=""></p><h4 id="port" tabindex="-1"><a class="header-anchor" href="#port" aria-hidden="true">#</a> port</h4><p>To find the <code>port</code> value, simply select your USB port in IOReg and look for the <code>port</code> entry:</p><table><thead><tr><th style="text-align:left;">IOReg</th><th style="text-align:left;">info.plist</th></tr></thead><tbody><tr><td style="text-align:left;"><img src="/assets/port.4dc8604b.png" alt=""></td><td style="text-align:left;"><img src="/assets/port-plist.0dffff86.png" alt=""></td></tr></tbody></table><p>From here we get <code>&lt;03 00 00 00&gt;</code>, you can simply remove any spaces and add it to your USB map</p><h4 id="port-count" tabindex="-1"><a class="header-anchor" href="#port-count" aria-hidden="true">#</a> port-count</h4><p>The final value remaining, look back at your USB map and see which <code>port</code> entry is the largest:</p><p><img src="/assets/port-count.60fddeea.png" alt=""></p><p>Here we see the largest in PXSX(1) is <code>&lt;04000000&gt;</code>, do keep in mind that <code>port</code> uses hexadecimal if you get any letters in your USB map.</p><h3 id="continuing-on" tabindex="-1"><a class="header-anchor" href="#continuing-on" aria-hidden="true">#</a> Continuing on</h3><p>Now that we&#39;ve gone over how to map your USB ports for a specific controller, you should have enough understanding to map more controllers. The sample USB-Map.kext I provided has 3 USB controllers listed in it(PXSX-1, PXSX-2 and XHCI). Remember to edit accordingly and to remove any unnecessary maps.</p><h2 id="cleaning-up" tabindex="-1"><a class="header-anchor" href="#cleaning-up" aria-hidden="true">#</a> Cleaning up</h2><p>Once your saved your USB map&#39;s info.plist, remember to add the kext to both your EFI/OC/Kexts and under you config.plist&#39;s Kernel -&gt; Add(ProperTree&#39;s snapshot can do this for you)</p><p>Next, remove/disable:</p><ul><li>USBInjectAll.kext(if you&#39;re using it) <ul><li>Reason for this is USBInjectAll actually breaks how Apple builds port maps. So while it&#39;s great for initial port mapping, it can break you final USB map</li></ul></li><li>Kernel -&gt; Quirks -&gt; XhciPortLimit -&gt; False <ul><li>Now that we&#39;re finally under the 15 port limit, we no longer need this hacky fix</li></ul></li></ul><p>Then reboot, and check IOReg one last time:</p><p><img src="/assets/finished.b942d5e6.png" alt=""></p><p>Voila! As you can see, our USB map applied successfully!</p><p>The main properties to verify are:</p><ul><li>Correct UsbConnector property on your USB ports</li><li>Comment applied(if injected)</li><li>Unused ports were removed</li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/macos86/macos86.github.io/edit/main/OpenCore-Post-Install/usb/manual/manual.md" rel="noopener noreferrer" target="_blank" aria-label="Aiutaci a tradurre questa pagina!"><!--[--><!--]--> Aiutaci a tradurre questa pagina! <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/OpenCore-Post-Install/usb/intel-mapping/intel.html" class="nav-link" aria-label="USB Mapping"><!--[--><!--]--> USB Mapping <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script type="module" src="/assets/app.9c75e1c0.js" defer></script>
  </body>
</html>
