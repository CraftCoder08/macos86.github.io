<!DOCTYPE html>
<html lang="it-IT">
  <head>
    <meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Debug del sistema: approfondito | Guida Installazione Opencore</title><meta name="description" content=""><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.20">
    <link rel="modulepreload" href="/assets/app.9c75e1c0.js"><link rel="modulepreload" href="/assets/kernel-debugging.html.614af384.js"><link rel="modulepreload" href="/assets/kernel-debugging.html.c5ebd98c.js">
    <link rel="stylesheet" href="/assets/style.eacd1a11.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/" class=""><img class="logo" src="/homepage.png" alt="Guida Installazione Opencore"><span class="site-name can-hide">Guida Installazione Opencore</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/Getting-Started-With-ACPI/" class="nav-link" aria-label="Iniziamo con ACPI"><!--[--><!--]--> Iniziamo con ACPI <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/config.plist/" class="nav-link" aria-label="Configurazione di OpenCore"><!--[--><!--]--> Configurazione di OpenCore <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/troubleshooting/" class="nav-link router-link-active" aria-label="Risoluzione dei problemi"><!--[--><!--]--> Risoluzione dei problemi <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/OpenCore-Post-Install/" class="nav-link" aria-label="Dopo l&#39;installazione di OpenCore..."><!--[--><!--]--> Dopo l&#39;installazione di OpenCore... <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/OpenCore-Multiboot/" class="nav-link" aria-label="Multibooting con OpenCore"><!--[--><!--]--> Multibooting con OpenCore <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/OpenCanopy-Gallery/" class="nav-link" aria-label="Galleria OpenCanopy"><!--[--><!--]--> Galleria OpenCanopy <!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/" rel="noopener noreferrer" target="_blank" aria-label="Dortania (EN)"><!--[--><!--]--> Dortania (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/GPU-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="GPU Buyers Guide (EN)"><!--[--><!--]--> GPU Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/Wireless-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="Wireless Buyers Guide (EN)"><!--[--><!--]--> Wireless Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/Anti-Hackintosh-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="Anti Buyers Guide (EN)"><!--[--><!--]--> Anti Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/macos86/macos86.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/Getting-Started-With-ACPI/" class="nav-link" aria-label="Iniziamo con ACPI"><!--[--><!--]--> Iniziamo con ACPI <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/config.plist/" class="nav-link" aria-label="Configurazione di OpenCore"><!--[--><!--]--> Configurazione di OpenCore <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/troubleshooting/" class="nav-link router-link-active" aria-label="Risoluzione dei problemi"><!--[--><!--]--> Risoluzione dei problemi <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/OpenCore-Post-Install/" class="nav-link" aria-label="Dopo l&#39;installazione di OpenCore..."><!--[--><!--]--> Dopo l&#39;installazione di OpenCore... <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/OpenCore-Multiboot/" class="nav-link" aria-label="Multibooting con OpenCore"><!--[--><!--]--> Multibooting con OpenCore <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/OpenCanopy-Gallery/" class="nav-link" aria-label="Galleria OpenCanopy"><!--[--><!--]--> Galleria OpenCanopy <!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/" rel="noopener noreferrer" target="_blank" aria-label="Dortania (EN)"><!--[--><!--]--> Dortania (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/GPU-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="GPU Buyers Guide (EN)"><!--[--><!--]--> GPU Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/Wireless-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="Wireless Buyers Guide (EN)"><!--[--><!--]--> Wireless Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://dortania.github.io/Anti-Hackintosh-Buyers-Guide/" rel="noopener noreferrer" target="_blank" aria-label="Anti Buyers Guide (EN)"><!--[--><!--]--> Anti Buyers Guide (EN) <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/macos86/macos86.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">Risoluzione dei problemi</p><ul class=""><li><!--[--><a href="/troubleshooting/extended/opencore-issues.html" class="nav-link sidebar-item" aria-label="OpenCore Problemi di boot"><!--[--><!--]--> OpenCore Problemi di boot <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/troubleshooting/extended/kernel-issues.html" class="nav-link sidebar-item" aria-label="Kernel Issues"><!--[--><!--]--> Kernel Issues <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/troubleshooting/extended/userspace-issues.html" class="nav-link sidebar-item" aria-label="Problemi nello spazio utente"><!--[--><!--]--> Problemi nello spazio utente <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/troubleshooting/extended/post-issues.html" class="nav-link sidebar-item" aria-label="Problemi Post-Installazione"><!--[--><!--]--> Problemi Post-Installazione <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/troubleshooting/extended/misc-issues.html" class="nav-link sidebar-item" aria-label="Problemi vari"><!--[--><!--]--> Problemi vari <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/troubleshooting/debug.html" class="nav-link sidebar-heading sidebar-item" aria-label="OpenCore Debugging"><!--[--><!--]--> OpenCore Debugging <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/troubleshooting/boot.html" class="nav-link sidebar-heading sidebar-item" aria-label="Comprendere il processo di avvio di macOS"><!--[--><!--]--> Comprendere il processo di avvio di macOS <!--[--><!--]--></a><!----><!--]--><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-heading sidebar-item active" aria-label="Debug del sistema: approfondito"><!--[--><!--]--> Debug del sistema: approfondito <!--[--><!--]--></a><ul class=""><li><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html#efi-setup" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="EFI Setup"><!--[--><!--]--> EFI Setup <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html#configurazione-config-plist" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Configurazione Config.plist"><!--[--><!--]--> Configurazione Config.plist <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html#misc" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Misc"><!--[--><!--]--> Misc <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html#nvram" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="NVRAM"><!--[--><!--]--> NVRAM <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html#serial-setup-opzionale" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Serial Setup(Opzionale)"><!--[--><!--]--> Serial Setup(Opzionale) <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html#hardware-setup" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Hardware Setup"><!--[--><!--]--> Hardware Setup <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html#coolterm-setup" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="CoolTerm Setup"><!--[--><!--]--> CoolTerm Setup <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html#kernel-debug-kits-opzionale" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Kernel Debug Kits (Opzionale)"><!--[--><!--]--> Kernel Debug Kits (Opzionale) <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html#kdk-su-un-sistema-operativo-installato" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="KDK su un sistema operativo installato"><!--[--><!--]--> KDK su un sistema operativo installato <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/troubleshooting/kernel-debugging.html#disinstallazione-di-kdk" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Disinstallazione di KDK"><!--[--><!--]--> Disinstallazione di KDK <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="debug-del-sistema-approfondito" tabindex="-1"><a class="header-anchor" href="#debug-del-sistema-approfondito" aria-hidden="true">#</a> Debug del sistema: approfondito</h1><p>Questa sezione andrà un po &#39;più in profondità nella risoluzione dei problemi, concentrandosi in particolare su un debug di livello più basso con un output di debug appropriato e una configurazione seriale opzionale.</p><p><strong>Note</strong>: Il 99% degli utenti non ha bisogno di questo livello di debug, questo è solo per casi estremi o estremi.</p><nav class="table-of-contents"><ul><li><a aria-current="page" href="/troubleshooting/kernel-debugging.html#efi-setup" class="router-link-active router-link-exact-active"># EFI Setup</a></li><li><a aria-current="page" href="/troubleshooting/kernel-debugging.html#configurazione-config-plist" class="router-link-active router-link-exact-active"># Configurazione Config.plist</a><ul><li><a aria-current="page" href="/troubleshooting/kernel-debugging.html#misc" class="router-link-active router-link-exact-active"># Misc</a></li><li><a aria-current="page" href="/troubleshooting/kernel-debugging.html#nvram" class="router-link-active router-link-exact-active"># NVRAM</a></li></ul></li><li><a aria-current="page" href="/troubleshooting/kernel-debugging.html#serial-setup-opzionale" class="router-link-active router-link-exact-active"># Serial Setup(Opzionale)</a><ul><li><a aria-current="page" href="/troubleshooting/kernel-debugging.html#hardware-setup" class="router-link-active router-link-exact-active"># Hardware Setup</a></li><li><a aria-current="page" href="/troubleshooting/kernel-debugging.html#coolterm-setup" class="router-link-active router-link-exact-active"># CoolTerm Setup</a></li></ul></li><li><a aria-current="page" href="/troubleshooting/kernel-debugging.html#kernel-debug-kits-opzionale" class="router-link-active router-link-exact-active"># Kernel Debug Kits (Opzionale)</a><ul><li><a aria-current="page" href="/troubleshooting/kernel-debugging.html#kdk-su-un-sistema-operativo-installato" class="router-link-active router-link-exact-active"># KDK su un sistema operativo installato</a></li><li><a aria-current="page" href="/troubleshooting/kernel-debugging.html#disinstallazione-di-kdk" class="router-link-active router-link-exact-active"># Disinstallazione di KDK</a></li></ul></li></ul></nav><h2 id="efi-setup" tabindex="-1"><a class="header-anchor" href="#efi-setup" aria-hidden="true">#</a> EFI Setup</h2><p>Per la maggior parte, sono necessarie modifiche abbastanza minime. Le cose principali che consigliamo sono la versione DEBUG di <strong>OpenCore</strong> e di tutti i tuoi <strong>kexts</strong>. Questo può aiutarti a ottenere tutti i dati necessari, vedi qui per maggiori dettagli sul debug di OpenCore: <a href="/troubleshooting/debug.html" class="">OpenCore debugging</a></p><p>Oltre a utilizzare solo le varianti DEBUG di OpenCore e kexts, anche questi strumenti possono essere di grande aiuto:</p><ul><li><p><a href="https://github.com/acidanthera/DebugEnhancer/releases" target="_blank" rel="noopener noreferrer">DebugEnhancer.kext<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><ul><li>Aiuta molto con il debug del kernel mentre si applica anche la patch <a href="https://github.com/acidanthera/DebugEnhancer/blob/4495911971011a1a7a0ffe8605d6ca4b341f67d9/DebugEnhancer/kern_dbgenhancer.cpp#L131" target="_blank" rel="noopener noreferrer">kern.msgbuf to 10485760<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> e consentendo un registro del kernel molto più grande.</li><li>Nota che questo kext non si può caricare con l&#39;inizializzazione del kernel, quindi i primi log non vengono aggiornati finché il kext non viene caricato subito prima della fase di configurazione PCI</li></ul></li><li><p><a href="https://gist.github.com/al3xtjames/39ebea4d615c8aed829109a9ea2cd0b5" target="_blank" rel="noopener noreferrer">SSDT-DBG<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><ul><li>Abilita le istruzioni di debug dalle tabelle ACPI, aiutando per il debug degli eventi ACPI nel sistema operativo</li><li>Nota che dovrai anche <a href="/Getting-Started-With-ACPI/Manual/compile.html" class="">compilare l&#39;SSDT</a></li></ul></li></ul><h2 id="configurazione-config-plist" tabindex="-1"><a class="header-anchor" href="#configurazione-config-plist" aria-hidden="true">#</a> Configurazione Config.plist</h2><p>Per la configurazione seriale, OpenCore lo rende in realtà abbastanza semplice.</p><h3 id="misc" tabindex="-1"><a class="header-anchor" href="#misc" aria-hidden="true">#</a> Misc</h3><ul><li><strong>SerialInt</strong>: YES <ul><li>Esegue l&#39;inizializzazione della porta seriale</li></ul></li><li><strong>Target</strong>: <code>67</code><ul><li>Abilita l&#39;output di debug con OpenCore</li><li>Target=75 aggiunge il flag di output seriale aggiuntivo (0x08) se <a href="#configurazione-seriale-opzionale">prevedi di utilizzare seriale</a></li><li>Puoi calcolare il tuo valore qui: <a href="/troubleshooting/debug.html" class="">OpenCore debugging</a></li></ul></li></ul><h3 id="nvram" tabindex="-1"><a class="header-anchor" href="#nvram" aria-hidden="true">#</a> NVRAM</h3><h4 id="argomenti-di-avvio" tabindex="-1"><a class="header-anchor" href="#argomenti-di-avvio" aria-hidden="true">#</a> Argomenti di avvio</h4><p>Qui possiamo impostare alcune variabili che ci aiuteranno con l&#39;output di debug, per noi utilizzeremo i seguenti argomenti di avvio:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-v keepsyms=1 debug=0x12a msgbuf=1048576
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Ora vediamo cosa fa ogni argomento:</p><ul><li><strong>-v</strong><ul><li>Abilita l&#39;output dettagliato</li></ul></li><li><strong>keepsyms=1</strong><ul><li>Assicura che i simboli vengano conservati durante i kernel panic, che sono molto utili per la risoluzione dei problemi</li></ul></li><li><strong>debug=0x12a</strong><ul><li>Combinazione di <code>DB_KPRT</code>(0x8), <code>DB_KDP_BP_DIS</code>(0x32), <code>DB_KDP_GETC_ENA(0x200)</code></li><li>Un elenco completo dei valori può essere trovato qui: <a href="https://github.com/apple/darwin-xnu/blob/master/osfmk/kern/debug.h#L419L447" target="_blank" rel="noopener noreferrer">debug.h<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul></li><li><strong>msgbuf=1048576</strong><ul><li>Imposta la dimensione del buffer dei messaggi del kernel, questo aiuta a ottenere i log corretti durante l&#39;avvio</li><li>1048576 is 1MB(/1024^2), può essere più grande se necessario</li><li>Nota non richiesta con DebugEnhancer.kext, tuttavia per i primi log del kernel è ancora richiesta</li></ul></li></ul><p><strong>Altri utili Argomenti di avvio</strong>:</p><p>A seconda di cosa stai eseguendo il debug, potresti trovare anche questi argomenti di avvio estremamente utili:</p><ul><li><strong>-liludbgall</strong><ul><li>Abilita il debug su Lilu e qualsiasi altro plugin, tieni presente che anche questo richiede versioni DEBUG di kexts</li></ul></li><li><strong>io=0xff</strong><ul><li>Abilita il debug di IOKit, con un output maggiore. Tieni presente che la quantità di registrazione di questo parametro sarà enorme e rallenterà il sistema. Soprattutto durante l&#39;avvio.</li></ul></li><li><strong>igdebug=0xff</strong><ul><li>Abilita il debug relativo a iGPU, utile quando si lavora con i sistemi iGPU</li></ul></li><li><strong>serial=5</strong><ul><li>Reindirizza l&#39;output a seriale se si<a href="#serial-setup-optional">prevede di utilizzare il seriale</a></li><li>Consigliato per l&#39;output iniziale del kernel prima della configurazione PCI</li></ul></li><li><strong>acpi_layer=0x8</strong><ul><li>Abilita il debug di <code>ACPI_TABLES</code>, vedi <a href="https://github.com/acpica/acpica/blob/master/source/include/acoutput.h" target="_blank" rel="noopener noreferrer">acoutput.h<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> per maggiori informazioni</li><li><code>0xFFFFFFFF</code> in alternativa abilita tutti i livelli</li></ul></li><li><strong>acpi_level=0x2</strong><ul><li>Imposta il debug di <code>ACPI_LV_DEBUG_OBJECT</code>, vedi <a href="https://github.com/acpica/acpica/blob/master/source/include/acoutput.h" target="_blank" rel="noopener noreferrer">acoutput.h<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> per maggiori informazioni</li><li><code>0xFFFF5F</code> in alternativa implica &quot;ACPI_ALL_COMPONENTS&quot;</li></ul></li></ul><h2 id="serial-setup-opzionale" tabindex="-1"><a class="header-anchor" href="#serial-setup-opzionale" aria-hidden="true">#</a> Serial Setup(Opzionale)</h2><ul><li><a href="#hardware-setup">Hardware Setup</a></li><li><a href="#efi-setup">EFI Setup</a></li><li><a href="#config-plist-setup">Config.plist Setup</a></li></ul><p>Sebbene facoltativo, il seriale può essere molto utile per acquisire tutte le informazioni importanti che invadono il tuo PC. È anche l&#39;unico modo per registrare correttamente i primi kernel panic (come le cose subito dopo <code>[EB | #LOG: EXITBS: START]</code>)</p><p>Per questa configurazione, avrai bisogno di alcune cose:</p><ul><li>Una porta seriale sulla macchina che si testa</li><li>Un cavo da seriale a seriale o da seriale a USB</li><li>Una seconda macchina per ricevere la registrazione seriale (con seriale o USB)</li><li>Software per monitorare l&#39;uscita seriale <ul><li>Per questa guida, utilizzeremo <a href="https://freeware.the-meiers.org" target="_blank" rel="noopener noreferrer">CoolTerm<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> poiché supporta macOS, Linux, Windows e persino Raspberry Pi <ul><li>Anche <code>screen</code> e altri metodi sono supportati.</li></ul></li></ul></li></ul><h3 id="hardware-setup" tabindex="-1"><a class="header-anchor" href="#hardware-setup" aria-hidden="true">#</a> Hardware Setup</h3><p>Per questo esempio, utilizzeremo una scheda Asus X299-E Strix che ha una porta seriale. Per verificare se la tua scheda ne ha una, controlla il manuale utente o di servizio e cerca la porta seriale/COM:</p><p><img src="/assets/serial-header.13b86689.png" alt=""></p><p>Come puoi vedere, abbiamo una porta COM nella parte inferiore della nostra scheda madre e cè anche un diagramma per collegare manualmente i nostri pin seriali se non stai utilizzando un connettore seriale 9/10 pin per l&#39;adattatore DB9.</p><p>In alternativa, alcune macchine sono dotate di porte seriali DB9 proprio sull&#39;IO posteriore come questo Dell Optiplex 780 SFF (si noti che VGA e seriale <strong>non</strong> sono lo stesso connettore):</p><p><img src="/assets/serial-connector.6b0c78aa.jpg" alt=""></p><p>Per la mia configurazione X299, sto usando un semplice file <a href="https://www.amazon.ca/gp/product/B001Y1F0HW/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&amp;psc=1" target="_blank" rel="noopener noreferrer">Serial header to DB9<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>, e un <a href="https://www.amazon.ca/gp/product/B075YGKFC1/ref=ppx_yo_dt_b_asin_title_o00_s01?ie=UTF8&amp;psc=1" target="_blank" rel="noopener noreferrer">DB9 to USB RS 232 adapter<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> che alla fine termina sul mio laptop:</p><table><thead><tr><th style="text-align:left;">Serial header to DB9</th><th style="text-align:left;">DB9 to USB RS 232 adapter</th></tr></thead><tbody><tr><td style="text-align:left;"><img src="/assets/817DNdBZDkL._AC_SL1500_.0f12cdc8.jpg" alt=""></td><td style="text-align:left;"><img src="/assets/61yHczOwpTL._AC_SL1001_.e9779065.jpg" alt=""></td></tr></tbody></table><p>Il manuale OpenCore generalmente consiglia dispositivi UART basati su CP21202:</p><blockquote><p>Per ottenere il log durante l&#39;avvio è possibile utilizzare il debug della porta seriale. Il debug della porta seriale è abilitato in Target, ad es. 0xB per sullo schermo con seriale. OpenCore utilizza una velocità di trasmissione di 115200, 8 bit di dati, nessuna parità e 1 bit di stop. Per macOS la scelta migliore sono i dispositivi UART basati su CP2102. Collega la scheda madre TX a USB UART RX e la scheda madre GND a USB UART GND. Utilizzare l&#39;utilità dello schermo per ottenere l&#39;output o scaricare il software GUI, come CoolTerm. Nota: su diverse schede madri (e possibilmente su dongle USB UART) la denominazione del PIN potrebbe non essere corretta. È molto comune avere GND scambiato con RX, quindi è necessario collegare la scheda madre &quot;TX&quot; a USB UART GND e la scheda madre &quot;GND&quot; a USB UART RX.</p></blockquote><p><strong>Promemoria importante</strong>: non dimenticare di abilitare anche la porta seriale nel BIOS, la maggior parte delle schede madri la disabilita per impostazione predefinita</p><h3 id="coolterm-setup" tabindex="-1"><a class="header-anchor" href="#coolterm-setup" aria-hidden="true">#</a> CoolTerm Setup</h3><p>Ora avvia <a href="https://freeware.the-meiers.org" target="_blank" rel="noopener noreferrer">CoolTerm<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> e imposta alcune opzioni. Quando apri CoolTerm, verrai probabilmente accolto con una semplice finestra. Qui seleziona la voce Opzioni:</p><p><img src="/assets/coolterm-first-start.43905627.png" alt=""><img src="/assets/coolterm-settings.1502a9ec.png" alt=""></p><p>Qui ci vengono fornite alcune opzioni, ma quelle principali a cui teniamo sono:</p><ul><li>Port: Assicurati che corrisponda al tuo controller seriale.</li><li>Baudrate = 115200</li><li>Data Bits = 8</li><li>Parity = none</li><li>Stop Bit = 1</li></ul><p>Quindi salvare queste impostazioni e selezionare la voce Connetti. Questo ti fornirà un registro in tempo reale da seriale:</p><p><img src="/assets/coolterm-connect.b70e8574.png" alt=""></p><p>Per registrare, vai semplicemente su <code>Connections -&gt; Capture to Text/Binary File -&gt; Start...(Cmd+R)</code>:</p><p><img src="/assets/coolterm-record.22d1c655.png" alt=""></p><h2 id="kernel-debug-kits-opzionale" tabindex="-1"><a class="header-anchor" href="#kernel-debug-kits-opzionale" aria-hidden="true">#</a> Kernel Debug Kits (Opzionale)</h2><ul><li><a href="#kdk-on-an-installed-os">KDK su un sistema operativo installato</a></li><li><a href="#uninstalling-the-kdk">Disinstallazione di KDK</a></li></ul><p>I kit di debug del kernel (KDK) sono un ottimo modo per ottenere ancora più informazioni di registrazione dal kernel e dai kext principali, in particolare i KDK sono versioni di debug delle fondamenta di base di macOS fornite da Apple stessa. Includono sia più registrazione che ASSERT che ti consentono di vedere più direttamente i problemi con la tua configurazione. Nota tuttavia non discuteremo del debug con bridge o dell&#39;utilizzo di &quot;lldb&quot;.</p><p><span style="color:red;"> CAUTION: </span> L&#39;installazione di KDK su macchine da lavoro può portare a problemi con gli aggiornamenti del sistema operativo e corrompere le installazioni. Eseguire il debug su installazioni macOS dedicate per evitare la perdita di dati</p><p>Per iniziare, avremo come minimo bisogno di un <a href="https://developer.apple.com/support/compare-memberships/" target="_blank" rel="noopener noreferrer">account sviluppatore gratuito<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> da Apple. Dopo esserti registrato come minimo ad un livello gratuito, ora puoi accedere ai KDK da <a href="https://developer.apple.com/download/more/" target="_blank" rel="noopener noreferrer">More Downloads page<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>:</p><ul><li>Nota: i livelli gratuiti saranno limitati al rilascio di KDK, beta beta di KDKs sono fornite solo ad <a href="https://developer.apple.com/support/compare-memberships/" target="_blank" rel="noopener noreferrer">account sviluppatore a pagamento<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li>Nota 2: Apple ospita KDK fin da OS X 10.5, Leopard, quindi non preoccuparti che il tuo sistema operativo non sia supportato.</li></ul><p><img src="/assets/more-downloads.599aca2c.png" alt=""></p><p>Per determinare quale build KDK ti serve con le build beta, esegui quanto segue nel terminale:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>sw_vers <span class="token operator">|</span> <span class="token function">grep</span> BuildVersion
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Per questo, scaricherò il kit di debug del kernel 11.3 build 20E5186d. Una volta scaricato, monta l&#39;immagine del disco e troverai il programma di installazione di KDK. Per impostazione predefinita, il KDK si installerà solo per &quot;Esecuzione del debug su due macchine&quot; e non fornirà alcun vantaggio aggiuntivo sulla macchina host per il debug del kernel per impostazione predefinita.</p><h3 id="kdk-su-un-sistema-operativo-installato" tabindex="-1"><a class="header-anchor" href="#kdk-su-un-sistema-operativo-installato" aria-hidden="true">#</a> KDK su un sistema operativo installato</h3><p>Per abilitare il debug sulla macchina host, dovrai eseguire le seguenti operazioni:</p><ol><li>Eseguire KDK Install pkg</li><li>Disabilitare SIP(OS X 10.11+)</li><li>Montare la partizione di root come scrivibile(macOS 10.15+)</li><li>Installa il kernel di debug e kexts</li><li>Aggiorna Argomenti di avvio</li><li>Riavvia e controlla il tuo lavoro</li></ol><h4 id="_1-esegui-kdk-install-pkg" tabindex="-1"><a class="header-anchor" href="#_1-esegui-kdk-install-pkg" aria-hidden="true">#</a> 1. Esegui KDK Install pkg</h4><p>Esegui semplicemente il pkg come di consueto:</p><p><img src="/assets/kdk-install.eb37cb07.png" alt=""></p><p>Una volta installati, troverai i componenti KDK come il kernel di debug in <code>/Library/Developer/KDKs</code>:</p><p><img src="/assets/kdk-installed.2b301fd7.png" alt=""></p><h4 id="_2-disabilitare-sip" tabindex="-1"><a class="header-anchor" href="#_2-disabilitare-sip" aria-hidden="true">#</a> 2. Disabilitare SIP</h4><ul><li>Applicabile a OS X 10.11, El Capitan e più recenti</li></ul><p>Per disabilitare SIP, gli utenti hanno 2 scelte:</p><ul><li><p>Disabilitare tramite Recovery</p></li><li><p><a href="/troubleshooting/extended/post-issues.html#disabling-sip" class="">Disabilitare tramite config.plist</a></p></li></ul><p>In genere consigliamo vivamente di usare la Recovery per ripristinare più facilmente tramite il reset NVRAM, tuttavia ad alcuni utenti potrebbe essere richiesto che SIP venga disabilitato anche per effettuare il reset.</p><p>Per il primo metodo, riavvia semplicemente in macOS Recovery, apri il terminale ed esegui quanto segue:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>csrutil disable
csrutil authenticated-root disable <span class="token comment"># Big Sur+</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Riavvia e SIP sarà stato regolato di conseguenza. Puoi eseguire <code>csrutil status</code> nel terminale per verificare che abbia funzionato.</p><ul><li><span style="color:red;"> ATTENZIONE: </span> Per gli utenti che fanno affidamento sulla <a href="/OpenCore-Post-Install/universal/security/applesecureboot.html#apecid" class="">funzionalità ApECID di OpenCore</a>, tieni presente che <strong>deve</strong> essere disabilitato per utilizzare KDK.</li></ul><h4 id="_3-montare-la-partizione-di-root-come-scrivibile" tabindex="-1"><a class="header-anchor" href="#_3-montare-la-partizione-di-root-come-scrivibile" aria-hidden="true">#</a> 3. Montare la partizione di root come scrivibile</h4><ul><li>Applicabile for macOS 10.15, Catalina e più recenti</li></ul><p>Mounting the root volume as writable is easy, however the process is a bit long:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Big Sur+</span>
<span class="token comment"># Innanzitutto, crea un mount point per la tua unità</span>
<span class="token function">mkdir</span> ~/livemount

<span class="token comment"># Quindi, trova il tuo volume di sistema</span>
diskutil list

<span class="token comment"># Dall&#39;elenco sottostante, possiamo vedere che il nostro volume di sistema è disk5s5</span>
/dev/disk5 <span class="token punctuation">(</span>synthesized<span class="token punctuation">)</span>:
   <span class="token comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   <span class="token number">0</span>:      APFS Container Scheme -                      +255.7 GB   disk5
                                 Physical Store disk4s2
   <span class="token number">1</span>:                APFS Volume ⁨Big Sur HD - Data⁩       <span class="token number">122.5</span> GB   disk5s1
   <span class="token number">2</span>:                APFS Volume ⁨Preboot⁩                 <span class="token number">309.4</span> MB   disk5s2
   <span class="token number">3</span>:                APFS Volume ⁨Recovery⁩                <span class="token number">887.8</span> MB   disk5s3
   <span class="token number">4</span>:                APFS Volume ⁨VM⁩                      <span class="token number">1.1</span> MB     disk5s4
   <span class="token number">5</span>:                APFS Volume ⁨Big Sur HD⁩              <span class="token number">16.2</span> GB    disk5s5
   <span class="token number">6</span>:              APFS Snapshot ⁨com.apple.os.update-<span class="token punctuation">..</span>.⁩ <span class="token number">16.2</span> GB    disk5s5s

<span class="token comment"># Montare l&#39;unità (es. Disk5s5)</span>
<span class="token function">sudo</span> <span class="token function">mount</span> -o nobrowse -t apfs  /dev/disk5s5 ~/livemount

<span class="token comment"># Ora puoi apportare liberamente qualsiasi modifica al volume di sistema</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Solo Catalina</span>
<span class="token function">sudo</span> <span class="token function">mount</span> -uw /
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_4-installa-il-kernel-di-debug-e-kexts" tabindex="-1"><a class="header-anchor" href="#_4-installa-il-kernel-di-debug-e-kexts" aria-hidden="true">#</a> 4. Installa il kernel di debug e kexts</h4><p>Ora installiamo il nostro KDK nel sistema:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Installa KDK nel volume di sistema</span>
<span class="token comment"># Assicurati di sostituire &lt;KDK Version&gt;</span>
<span class="token comment"># Per 10.15 e versioni precedenti, scambia livemount con /Volumes/&lt;Target Volume&gt;</span>
<span class="token function">sudo</span> ditto /Library/Developer/KDKs/<span class="token operator">&lt;</span>KDK Version<span class="token operator">&gt;</span>/System ~/livemount/System

<span class="token comment"># Ricostruisci la cache del kernel (Big Sur e versioni successive)</span>
<span class="token function">sudo</span> kmutil <span class="token function">install</span> --volume-root ~/livemount --update-all

<span class="token comment"># Ricostruisci la cache del kernel (Catalina e versioni precedenti)</span>
<span class="token function">sudo</span> kextcache -invalidate /Volumes/<span class="token operator">&lt;</span>Target Volume<span class="token operator">&gt;</span>

<span class="token comment"># Infine, una volta terminata la modifica del volume di sistema</span>
<span class="token comment"># vorremo creare un nuovo snapshot (Big Sur e più recenti)</span>
<span class="token function">sudo</span> bless --folder ~/livemount/System/Library/CoreServices --bootefi --create-snapshot
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_5-aggiornare-argomenti-di-avvio" tabindex="-1"><a class="header-anchor" href="#_5-aggiornare-argomenti-di-avvio" aria-hidden="true">#</a> 5. Aggiornare Argomenti di avvio</h4><p>Ora che hai finito di configurare KDK e di averlo installato, dobbiamo dire a boot.efi quale kernel usare. Hai 2 opzioni tra cui scegliere:</p><ul><li><code>kcsuffix=debug</code> (removed with Big Sur)</li><li><code>kcsuffix=development</code></li><li><code>kcsuffix=kasan</code></li></ul><p><code>development</code> arg imposterà il nuovo kernel di debug predefinito in Big Sur, mentre <code>kasan</code> è un kernel molto più intensivo di registrazione che incorpora <a href="https://github.com/google/sanitizers/wiki/AddressSanitizer" target="_blank" rel="noopener noreferrer">AddressSanitizer<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><p>Una volta deciso quale kernel è l&#39;ideale per te, aggiungi l&#39;argomento kcsuffix ai tuoi argomenti di avvio nel tuo config.plist</p><h4 id="_6-riavvia-e-controlla-il-tuo-lavoro" tabindex="-1"><a class="header-anchor" href="#_6-riavvia-e-controlla-il-tuo-lavoro" aria-hidden="true">#</a> 6. Riavvia e controlla il tuo lavoro</h4><p>Supponendo che tutto sia stato fatto correttamente, ora vorrai riavviare e verificare che sia stato avviato il kernel corretto:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>sysctl kern.osbuildconfig
 kern.osbuildconfig: kasan
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>E come possiamo vedere, stiamo avviando con successo un kernel KASAN.</p><h3 id="disinstallazione-di-kdk" tabindex="-1"><a class="header-anchor" href="#disinstallazione-di-kdk" aria-hidden="true">#</a> Disinstallazione di KDK</h3><p>La disinstallazione del KDK è abbastanza semplice, tuttavia può essere un po &#39;distruttiva se non si presta attenzione.</p><ol><li>Montare la partizione root come scrivibile (macOS 10.15+)</li><li>Rimuovi il kernel di debug e kexts</li><li>Riattiva SIP</li><li>Ripulire Argomenti di avvio</li><li>Riavvia e controlla il tuo lavoro</li></ol><p>Steps:</p><h4 id="_1-montare-la-partizione-root-come-scrivibile-macos-10-15" tabindex="-1"><a class="header-anchor" href="#_1-montare-la-partizione-root-come-scrivibile-macos-10-15" aria-hidden="true">#</a> 1. Montare la partizione root come scrivibile (macOS 10.15+)</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Big Sur+</span>
<span class="token comment"># Innanzitutto, crea un mount point per la tua unità</span>
<span class="token comment"># Salta se ancora presente il volume di montaggio dell&#39;ultima volta</span>
<span class="token function">mkdir</span> ~/livemount

<span class="token comment"># Quindi, trova il tuo volume di sistema</span>
diskutil list

<span class="token comment"># Dall&#39;elenco sottostante, possiamo vedere che il nostro volume di sistema è disk5s5</span>
/dev/disk5 <span class="token punctuation">(</span>synthesized<span class="token punctuation">)</span>:
   <span class="token comment">#:                       TYPE NAME                    SIZE       IDENTIFIER</span>
   <span class="token number">0</span>:      APFS Container Scheme -                      +255.7 GB   disk5
                                 Physical Store disk4s2
   <span class="token number">1</span>:                APFS Volume ⁨Big Sur HD - Data⁩       <span class="token number">122.5</span> GB   disk5s1
   <span class="token number">2</span>:                APFS Volume ⁨Preboot⁩                 <span class="token number">309.4</span> MB   disk5s2
   <span class="token number">3</span>:                APFS Volume ⁨Recovery⁩                <span class="token number">887.8</span> MB   disk5s3
   <span class="token number">4</span>:                APFS Volume ⁨VM⁩                      <span class="token number">1.1</span> MB     disk5s4
   <span class="token number">5</span>:                APFS Volume ⁨Big Sur HD⁩              <span class="token number">16.2</span> GB    disk5s5
   <span class="token number">6</span>:              APFS Snapshot ⁨com.apple.os.update-<span class="token punctuation">..</span>.⁩ <span class="token number">16.2</span> GB    disk5s5s

<span class="token comment"># Montare l&#39;unità (es. Disk5s5)</span>
<span class="token function">sudo</span> <span class="token function">mount</span> -o nobrowse -t apfs  /dev/disk5s5 ~/livemount
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Solo Catalina</span>
<span class="token function">sudo</span> <span class="token function">mount</span> -uw /
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-rimuovi-il-kernel-di-debug-e-kexts" tabindex="-1"><a class="header-anchor" href="#_2-rimuovi-il-kernel-di-debug-e-kexts" aria-hidden="true">#</a> 2. Rimuovi il kernel di debug e kexts</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Ripristina il precedente snapshot (Big Sur)</span>
<span class="token function">sudo</span> bless --mount ~/livemount --bootefi --last-sealed-snapshot
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Reset kernel cache (Catalina e versioni precedenti)</span>
<span class="token function">sudo</span> <span class="token function">rm</span> /System/Library/Caches/com.apple.kext.caches/Startup/kernelcache.de*
<span class="token function">sudo</span> <span class="token function">rm</span> /System/Library/PrelinkedKernels/prelinkedkernel.de*
<span class="token function">sudo</span> kextcache -invalidate /
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3-riabilitare-sip" tabindex="-1"><a class="header-anchor" href="#_3-riabilitare-sip" aria-hidden="true">#</a> 3. Riabilitare SIP</h4><ul><li>Comandi da usare in Recovery (se precedentemente modificati tramite Recovery):</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>csrutil <span class="token builtin class-name">enable</span>
csrutil authenticated-root <span class="token builtin class-name">enable</span> <span class="token comment"># Big Sur+</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>Modifiche al config.plist (se precedentemente modificato): <ul><li><a href="/troubleshooting/extended/post-issues.html#disabilitare-sip" class="">Abilitare tramite config.plist</a></li></ul></li></ul><h4 id="_4-ripulire-le-argomenti-di-avvio" tabindex="-1"><a class="header-anchor" href="#_4-ripulire-le-argomenti-di-avvio" aria-hidden="true">#</a> 4. Ripulire le Argomenti di avvio</h4><p>Non dimenticare di rimuovere <code>kcsuffix =</code> dalle Argomenti di avvio</p><h4 id="_5-riavvia-e-controlla-il-tuo-lavoro" tabindex="-1"><a class="header-anchor" href="#_5-riavvia-e-controlla-il-tuo-lavoro" aria-hidden="true">#</a> 5. Riavvia e controlla il tuo lavoro</h4><p>Supponendo che tutto sia stato fatto correttamente, ora devi riavviare e verificare che sia stato avviato il kernel corretto:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>sysctl kern.osbuildconfig
 kern.osbuildconfig: release
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>E come possiamo vedere, stiamo avviando con successo un kernel KASAN.</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/macos86/macos86.github.io/edit/main/troubleshooting/kernel-debugging.md" rel="noopener noreferrer" target="_blank" aria-label="Aiutaci a tradurre questa pagina!"><!--[--><!--]--> Aiutaci a tradurre questa pagina! <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Ultimo Aggiornamento: </span><span class="meta-item-info">15/7/2021, 12:58:19</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/troubleshooting/boot.html" class="nav-link" aria-label="Comprendere il processo di avvio di macOS"><!--[--><!--]--> Comprendere il processo di avvio di macOS <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script type="module" src="/assets/app.9c75e1c0.js" defer></script>
  </body>
</html>
