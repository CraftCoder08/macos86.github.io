import{r as e,o as n,c as a,a as s,w as l,F as t,b as i}from"./app.9c75e1c0.js";import{_ as o}from"./amd.b5ac00b2.js";import{_ as r}from"./nvidia.3b2b1daa.js";const u={},c=s("h1",{id:"renaming-gpus-ssdt-gpu-spoof",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#renaming-gpus-ssdt-gpu-spoof","aria-hidden":"true"},"#"),i(" Renaming GPUs (SSDT-GPU-SPOOF)")],-1),d=s("p",null,"So this is mainly needed for GPUs that are not natively supported out of the box due to their names, most commonly:",-1),p=s("ul",null,[s("li",null,"R9 290/390"),s("li",null,"R9 280/380"),s("li",null,"R7 270/370"),s("li",null,"R9 260/360"),s("li",null,"R7 250"),s("li",null,"R7 240")],-1),h=s("p",null,'Instead, these GPUs need to be "spoofed" or faked into a model that closely matches theirs, generally this will be the "X" variant of the card. For some reason Apple never bothered adding the PCI IDs for these other cards even though their GPU cores are supported by the driver.',-1),b=s("p",null,"So to spoof the GPU, we need to find a couple things:",-1),m=s("li",null,"Suitable PCI ID for the GPU",-1),g=s("li",null,"ACPI Path of the GPU",-1),f={href:"https://github.com/macos86/Getting-Started-With-ACPI/blob/master/extra-files/decompiled/SSDT-GPU-SPOOF.dsl",target:"_blank",rel:"noopener noreferrer"},P=i("SSDT-GPU-SPOOF"),k=s("h2",{id:"finding-a-suitable-pci-id",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#finding-a-suitable-pci-id","aria-hidden":"true"},"#"),i(" Finding a suitable PCI ID")],-1),v=s("h3",{id:"finding-a-suitable-pci-id-in-the-web",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#finding-a-suitable-pci-id-in-the-web","aria-hidden":"true"},"#"),i(" Finding a suitable PCI ID in the Web")],-1),I=i("To find a suitable PCI ID, we'll be using "),x={href:"https://pci-ids.ucw.cz/read/PC/1002",target:"_blank",rel:"noopener noreferrer"},w=i("PCI ID Repository"),D=i(" which has a full database of all AMD GPUs. For this example, we'll be creating a Spoof SSDT for the R9 390. For a full list of supported GPUs, please see the "),S={href:"https://dortania.github.io/GPU-Buyers-Guide/",target:"_blank",rel:"noopener noreferrer"},C=i("GPU Buyers Guide"),y=i(". The closest match to this GPU would be the 390X, and looking on that site near the top gives us this:"),G=s("div",{class:"language-text ext-text line-numbers-mode"},[s("pre",{class:"language-text"},[s("code",null,"Vendor 1002 -> Device 1002:67b0\n")]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br")])],-1),A=s("p",null,"Now lets break this down into a device ID we can use:",-1),R=s("ul",null,[s("li",null,[s("code",null,"1002"),i(": The vendor ID, all AMD devices have this ID")]),s("li",null,[s("code",null,"67B0"),i(": The device ID, this is what we care about")])],-1),U=s("p",null,"So how do we convert this to a fake ID? Well the format of a fake ID:",-1),T=s("div",{class:"language-c ext-c line-numbers-mode"},[s("pre",{class:"language-c"},[s("code",null,[s("span",{class:"token string"},'"device-id"'),s("span",{class:"token punctuation"},","),i("\n"),s("span",{class:"token function"},"Buffer"),i(),s("span",{class:"token punctuation"},"("),s("span",{class:"token number"},"0x04"),s("span",{class:"token punctuation"},")"),i("\n"),s("span",{class:"token punctuation"},"{"),i("\n     "),s("span",{class:"token number"},"0xB0"),s("span",{class:"token punctuation"},","),i(),s("span",{class:"token number"},"0x67"),s("span",{class:"token punctuation"},","),i(),s("span",{class:"token number"},"0x00"),s("span",{class:"token punctuation"},","),i(),s("span",{class:"token number"},"0x00"),i("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),i("\n")])]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),O=s("p",null,"As you can see, the bytes are swapped in pairs. Keep this in mind when we make our SSDT",-1),_=i("The specifics are due to "),B={href:"https://en.wikipedia.org/wiki/Endianness",target:"_blank",rel:"noopener noreferrer"},F=i("Endianness"),M=i(" for those who are curious"),E=s("h3",{id:"finding-a-suitable-pci-id-in-linux",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#finding-a-suitable-pci-id-in-linux","aria-hidden":"true"},"#"),i(" Finding a suitable PCI ID in Linux")],-1),L=s("p",null,[i("If you can run Linux, use command "),s("code",null,"lspci -vmmnnD -d 1002::0300")],-1),W=s("div",{class:"language-text ext-text line-numbers-mode"},[s("pre",{class:"language-text"},[s("code",null,"$ lspci -vmmnnD -d 1002::0300\nSlot: 0000:01:00.0\nClass: VGA compatible controller [0300]\nVendor: Advanced Micro Devices, Inc. [AMD/ATI] [1002]\nDevice: Oland [Radeon HD 8570 / R7 240/340 / Radeon 520 OEM] [6611]\nSVendor: Micro-Star International Co., Ltd. [MSI] [1462]\nSDevice: Device [3740]\nRev: 87\n")]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br")])],-1),j=s("p",null,"You can easily get",-1),N=s("ul",null,[s("li",null,[i("Slot ID "),s("code",null,"0000:01:00.0"),i(", we need it later")]),s("li",null,[i("Vendor ID "),s("code",null,"1002"),i(", all AMD devices have this ID")]),s("li",null,[i("Device ID "),s("code",null,"6611"),i(", this is what we care about")]),s("li",null,[i("Device name "),s("code",null,"Radeon HD 8570 / R7 240/340 / Radeon 520 OEM"),i(", mainly cosmetic")])],-1),V=s("h2",{id:"finding-the-acpi-path-of-the-gpu",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#finding-the-acpi-path-of-the-gpu","aria-hidden":"true"},"#"),i(" Finding the ACPI Path of the GPU")],-1),H=s("h3",{id:"windows",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#windows","aria-hidden":"true"},"#"),i(" Windows")],-1),X=s("p",null,"To find the PCI path of a GPU is fairly simple, best way to find it is running Windows:",-1),$=s("ul",null,[s("li",null,"Open Device Manager"),s("li",null,"Select Display Adapters, then right click your GPU and select Properties"),s("li",null,[i('Under the Details Tab, search for "Location Paths" '),s("ul",null,[s("li",null,'Note some GPUs may be hiding under "BIOS device name"')])])],-1),q=s("p",null,[s("img",{src:o,alt:""})],-1),z=s("p",null,[s("img",{src:r,alt:"Credit to 1Revenger1 for the image"})],-1),J=s("p",null,'The second "ACPI" is what we care about:',-1),K=s("div",{class:"language-text ext-text line-numbers-mode"},[s("pre",{class:"language-text"},[s("code",null,"ACPI(_SB_)#ACPI(PC02)#ACPI(BR2A)#ACPI(PEGP)#PCI(0000)#PCI(0000)\n")]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br")])],-1),Y=s("p",null,[i("Now converting this to an ACPI path is quite simple, remove the "),s("code",null,"#ACPI"),i(" and "),s("code",null,"#PCI(0000)"),i(":")],-1),Q=s("div",{class:"language-text ext-text line-numbers-mode"},[s("pre",{class:"language-text"},[s("code",null,"\\_SB_.PC02.BR2A.PEGP\n")]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br")])],-1),Z=s("h3",{id:"linux",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#linux","aria-hidden":"true"},"#"),i(" Linux")],-1),ee=s("p",null,[i("Substitute your SLOTID found above into command "),s("code",null,"cat /sys/bus/pci/devices/SLOTID/firmware_node/path"),i(", you cat get")],-1),ne=s("div",{class:"language-bash ext-sh line-numbers-mode"},[s("pre",{class:"language-bash"},[s("code",null,[i("$ "),s("span",{class:"token function"},"cat"),i(" /sys/bus/pci/devices/0000:01:00.0/firmware_node/path\n"),s("span",{class:"token punctuation"},"\\"),i("_SB_.PC02.BR2A.PEGP\n")])]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),ae=s("p",null,"And voila! We've found our ACPI path, now that we have everything we're ready to get cooking",-1),se=s("h2",{id:"making-the-ssdt",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#making-the-ssdt","aria-hidden":"true"},"#"),i(" Making the SSDT")],-1),le=i("To start grab our "),te={href:"https://github.com/macos86/Getting-Started-With-ACPI/blob/master/extra-files/decompiled/SSDT-GPU-SPOOF.dsl",target:"_blank",rel:"noopener noreferrer"},ie=i("SSDT-GPU-SPOOF"),oe=i(" and open it up. Here there's a couple things to change:"),re=s("div",{class:"language-text ext-text line-numbers-mode"},[s("pre",{class:"language-text"},[s("code",null,"External (_SB_.PCI0, DeviceObj)\nExternal (_SB_.PCI0.PEG0.PEGP, DeviceObj)\n")]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),ue=s("p",null,"For our example, we'll change all mentions of :",-1),ce=s("ul",null,[s("li",null,[s("code",null,"PCI0"),i(" with "),s("code",null,"PC02")]),s("li",null,[s("code",null,"PEG0"),i(" with "),s("code",null,"BR2A")])],-1),de=s("p",null,"Hint: If your ACPI path is a bit shorter than the example, this is fine. Just make sure the ACPI paths are correct to your device.",-1),pe=s("p",null,"Now that the ACPI pathing is correct, we can finally apply our fake ID!!!",-1),he=s("p",null,"So the 2 parts we want to change:",-1),be=s("p",null,[s("strong",null,"device ID"),i(":")],-1),me=s("div",{class:"language-c ext-c line-numbers-mode"},[s("pre",{class:"language-c"},[s("code",null,[s("span",{class:"token string"},'"device-id"'),s("span",{class:"token punctuation"},","),i("\n"),s("span",{class:"token function"},"Buffer"),i(),s("span",{class:"token punctuation"},"("),s("span",{class:"token number"},"0x04"),s("span",{class:"token punctuation"},")"),i("\n"),s("span",{class:"token punctuation"},"{"),i("\n    "),s("span",{class:"token number"},"0xB0"),s("span",{class:"token punctuation"},","),i(),s("span",{class:"token number"},"0x67"),s("span",{class:"token punctuation"},","),i(),s("span",{class:"token number"},"0x00"),s("span",{class:"token punctuation"},","),i(),s("span",{class:"token number"},"0x00"),i("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),i("\n")])]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),ge=s("p",null,[s("strong",null,"Model"),i(":")],-1),fe=s("div",{class:"language-c ext-c line-numbers-mode"},[s("pre",{class:"language-c"},[s("code",null,[s("span",{class:"token string"},'"model"'),s("span",{class:"token punctuation"},","),i("\n"),s("span",{class:"token function"},"Buffer"),i(),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),i("\n"),s("span",{class:"token punctuation"},"{"),i("\n    "),s("span",{class:"token string"},'"AMD Radeon R9 390"'),i("\n"),s("span",{class:"token punctuation"},"}"),i("\n")])]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),Pe=s("p",null,[s("code",null,'"device-id"'),i(' will be set to our PCI ID that we found in "Finding a suitable PCI ID" and '),s("code",null,'"model"'),i(" is mainly cosmetic")],-1),ke={id:"now-you-re-ready-to-compile-the-ssdt",tabindex:"-1"},ve=s("a",{class:"header-anchor",href:"#now-you-re-ready-to-compile-the-ssdt","aria-hidden":"true"},"#",-1),Ie=i(),xe=i("Now you're ready to compile the SSDT!");u.render=function(i,o){const r=e("OutboundLink"),u=e("RouterLink");return n(),a(t,null,[c,d,p,h,b,s("ul",null,[m,g,s("li",null,[s("a",f,[P,s(r)])])]),k,v,s("p",null,[I,s("a",x,[w,s(r)]),D,s("a",S,[C,s(r)]),y]),G,A,R,U,T,O,s("p",null,[_,s("a",B,[F,s(r)]),M]),E,L,W,j,N,V,H,X,$,q,z,J,K,Y,Q,Z,ee,ne,ae,se,s("p",null,[le,s("a",te,[ie,s(r)]),oe]),re,ue,ce,de,pe,he,be,me,ge,fe,Pe,s("h2",ke,[ve,Ie,s(u,{to:"/compile.html"},{default:l((()=>[xe])),_:1})])],64)};export default u;
